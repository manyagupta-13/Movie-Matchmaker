<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies List</title>
</head>
<body>
    <h1>Movies List</h1>
    <div id="movies"></div>

    <script>
        const apiKey = "7c796889"; // Replace with your API key
        const urlParams = new URLSearchParams(window.location.search);
        const genre = urlParams.get("genre");

        async function fetchMovies() {
            const response = await fetch(`https://www.omdbapi.com/?apikey=${apiKey}&s=movie&type=movie`);
            const data = await response.json();
            
            if (!data.Search) {
                document.getElementById("movies").innerHTML = "<p>No movies found.</p>";
                return;
            }

            // Filter movies by fetching details for each one
            const filteredMovies = await Promise.all(
                data.Search.map(async (movie) => {
                    const detailsResponse = await fetch(`https://www.omdbapi.com/?apikey=${apiKey}&i=${movie.imdbID}`);
                    const detailsData = await detailsResponse.json();
                    return detailsData.Genre.includes(genre) ? `<p>${detailsData.Title} (${detailsData.Year})</p>` : null;
                })
            );

            // Display filtered movies
            document.getElementById("movies").innerHTML = filteredMovies.filter(Boolean).join("") || "<p>No movies found for this genre.</p>";
        }

        fetchMovies();
    </script>
</body>
</html>
